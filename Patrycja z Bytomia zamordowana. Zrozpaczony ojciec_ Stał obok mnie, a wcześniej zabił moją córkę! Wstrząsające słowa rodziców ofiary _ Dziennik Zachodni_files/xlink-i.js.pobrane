!function(){var o,l,r,e,a=!1,s=!0,d="https://prodxnews1blob.blob.core.windows.net/cdn/css",c=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,n="";function t(t,e,n){if(t){for(var i in window.addEventListener("message",p,!1),(o=document.createElement("iframe")).setAttribute("src",e),n)n.hasOwnProperty(i)&&o.setAttribute(i,n[i]);o.setAttribute("frameborder","0"),o.setAttribute("allowtransparency",!0),o.setAttribute("webkitallowfullscreen",!0),o.setAttribute("mozallowfullscreen",!0),o.setAttribute("allowfullscreen",!0),o.setAttribute("allow","autoplay; fullscreen"),o.setAttribute("scrolling","no"),a?(function(){window.xlink||(window.xlink={styleTag:0});if(0===window.xlink.styleTag){var t=document.createElement("link");t.rel="stylesheet",t.href=d+"/xlink-outer.css",t.media="all",document.getElementsByTagName("head")[0].appendChild(t),window.xlink.styleTag=1}}(),function(t){if(!l){(l=document.createElement("div")).classList.add("floating-xlink-pointer"),t.parentNode.insertBefore(l,t.nextSibling),(r=document.createElement("div")).classList.add("floating-xlink-cnt"),c&&r.classList.add("ios-xlink-cnt"),l.appendChild(r),r.appendChild(o);var e=document.createElement("div");e.classList.add("floating-xlink-closeFloatButton"),r.appendChild(e),e.addEventListener("click",function(){g()},!1),window.addEventListener?(addEventListener("scroll",u,!1),addEventListener("resize",u,!1)):window.attachEvent&&(attachEvent("onscroll",u),attachEvent("onresize",u));var n=window.matchMedia("(orientation: portrait)");n.addListener(function(){u("orientationchange")})}}(t)):t.parentNode.insertBefore(o,t.nextSibling)}else console.error('Unable to find target element with id "'+t+'"')}function p(t){"xlink.title"===t.data["xlink.event"]&&(o.title=t.data.title),"xlink.loaded"===t.data["xlink.event"]&&o.contentWindow.postMessage({xlinkEvent:"xlink.start",origin:window.location.toString()},"*"),t.data["xlink.event"]&&l&&(e.includes("/"+t.data.hash)?("video.playing"===t.data["xlink.event"]&&t.data.isFloatingPlayer&&l.classList.add("floating-player-started"),"video.begin"===t.data["xlink.event"]&&t.data.isFloatingPlayer&&(n=o.getAttribute("style"),l.classList.add("video-complete-ad"),s=!1,0===h(l)&&g()),"video.allowCloseFloatingPlayer"===t.data["xlink.event"]&&l.classList.add("video-complete-ad"),"video.complete"!==t.data["xlink.event"]||t.data.isPlaylist||g()):"video.playing"!==t.data["xlink.event"]||"scroll_pause"!==t.data.autoplayType&&t.data.autoplayType||g())}function g(){l&&l.classList.contains("floating-player-started")&&(l.classList.remove("floating-player-started"),m(),o.contentWindow.postMessage({xlinkEvent:!0,floatingClosed:!0},"*"))}function u(t){if(l&&l.classList.contains("floating-player-started")){var e,n=("string"==typeof t||t instanceof String)&&"orientationchange"===t,i=h(l),a=f(l)&&(i<0||0===i&&s);if(!a||r.classList.contains("xlink-floating-wsx")&&!n)!a&&r.classList.contains("xlink-floating-wsx")&&m();else l.setAttribute("style","height: "+l.offsetHeight+"px"),n?(r.classList.remove("xlink-floating-wsx"),setTimeout(function(){r.classList.add("xlink-floating-wsx")},100)):r.classList.add("xlink-floating-wsx"),e=900<=window.innerWidth?"position: initial !important; width: 320px !important; height: 180px !important;":501<=window.innerWidth?"position: initial !important; width: 240px !important; height: 135px !important;":"position: absolute !important; height: 0 !important; width: 0 !important; max-height: 100% !important; max-width: 100% !important; min-height: 100% !important; min-width: 100% !important;",o.setAttribute("style",e)}}function m(){r.classList.remove("xlink-floating-wsx"),l.setAttribute("style",""),n?o.setAttribute("style",n):o.removeAttribute("style")}function i(t,e){return!!t.getAttributeNode(e)&&t.getAttributeNode(e).value}function f(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}function h(t){var e=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;return e.top>n?0:e.top<0?e.bottom:n-e.top}function v(){var t,e,n,i,a;o&&o.contentWindow.postMessage({xlinkEvent:!0,visibilityPercentage:f(o)?(t=o,i=t.getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight,0===(e=i.top>a?0:i.top<0?i.bottom:a-i.top)?0:(n=e/(i.height/100),100<(n=Math.round(n))?100:n<0?0:n)):0},"*")}function w(t,e){if("function"==typeof t.closest)return t.closest(e)||null;for(;t;){if(t.matches(e))return t;t=t.parentElement}return null}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;0<=--n&&e.item(n)!==this;);return-1<n});var y=document.getElementsByClassName("XlinkEmbedScript");if(y){for(var x=0;x<y.length;x++){var E=y[x];if(!1===i(E,"data-processed")){var b={},k=i(E,"data-url");e=k;var L=i(E,"data-width"),A=i(E,"data-height");L&&(b.width=L),A&&(b.height=A),a=!1!==i(E,"data-floating");var _="";if("undefined"!=typeof __pix2)_="?pix2_uuid="+__pix2.getUUID();var C=w(E,".xlink_embed");if(C){var S={"data-content-category":"content_category","data-content-category2":"content_category2","data-main-video":"main_video","data-traffic-tags":"traffic_tags","data-player-type":"player_type","data-traffic-category":"traffic_category","data-tvn-login":"tvn_login","data-tvn-id":"tvn_id"};for(var M in S){var P=i(C,M);!1!==P&&(_+=_?"&":"?",_+=S[M]+"="+encodeURIComponent(P))}}_&&(k+=_),E.setAttribute("data-processed","1"),t(E,k,b);break}}window.addEventListener?(addEventListener("DOMContentLoaded",v,!1),addEventListener("load",v,!1),addEventListener("scroll",v,!1),addEventListener("resize",v,!1)):window.attachEvent&&(attachEvent("onDOMContentLoaded",v),attachEvent("onload",v),attachEvent("onscroll",v),attachEvent("onresize",v))}}();